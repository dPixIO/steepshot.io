{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
    <title>dPix</title>
    <link id="favicon" rel="icon" type="image/png" sizes="64x64" href="data:image/png;base64,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">
    <link rel="stylesheet" href="{% static 'css/main.css' %}?v=20180601">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {'packages': ['line']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {

            var data = new google.visualization.DataTable();
            {% for itm in headers %}
                {% for k, v in itm.items %}
                    data.addColumn('{{ v }}', '{{ k }}');
                {% endfor %}
            {% endfor %}
            data.addRows([
                {% for i in data %}
                    [
                        {% for j in i %}
                            '{{ j }}',
                        {% endfor %}
                    ].map((itm, idx) => { if (idx === 0) return itm; else return parseFloat(itm)}),
                {% endfor %}
            ]);

            var options = {
                chart: {
                    title: '{{ title }}',
                    subtitle: '{{ subtitle }}'
                },
                width: window.innerWidth * 0.97,
                height: window.innerHeight * 0.97,
                vAxis: {
                    title: '{{ title }}',
                    format: 'decimal',
                    textStyle: {
                        fontSize: 16
                    }
                },
                hAxis: {
                    gridlines: { count: 1 },
                    textStyle: {
                        fontSize: 16
                    }
                }
            };

            var chart = new google.charts.Line(document.getElementById('chart_div'));

            google.visualization.events.addListener(chart, 'error', function (googleError) {
                google.visualization.errors.removeError(googleError.id);
                document.getElementById("error_msg").innerHTML = "No data to display";
            });

            chart.draw(data, google.charts.Line.convertOptions(options));
        }
    </script>
</head>

<body>
<span id="error_msg"></span>
<div id="logout_graph">
    <form method="get" action="{% url 'graph:logout' %}">
        <input type="submit" class="btn" value="Logout">
    </form>
</div>
<div id="chart_div"></div>
</body>
</html>
